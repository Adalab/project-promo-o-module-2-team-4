"use strict";const legendShare=document.querySelector(".js_legendShare"),legendFill=document.querySelector(".js_legendFill"),legendDesign=document.querySelector(".js_legendDesign"),collapsible=document.querySelector(".js_collapsible");function handlerClickLegend(e){collapseContent(e),rotateArrow(e)}function rotateArrow(e){e.currentTarget.parentNode.classList.toggle("rotateArrow"),e.currentTarget===legendShare?(legendFill.parentNode.classList.add("rotateArrow"),legendDesign.parentNode.classList.add("rotateArrow")):e.currentTarget===legendFill?(legendShare.parentNode.classList.add("rotateArrow"),legendDesign.parentNode.classList.add("rotateArrow")):(legendShare.parentNode.classList.add("rotateArrow"),legendFill.parentNode.classList.add("rotateArrow"))}function collapseContent(e){e.currentTarget.parentNode.classList.toggle("collapse"),e.currentTarget===legendShare?(legendFill.parentNode.classList.add("collapse"),legendDesign.parentNode.classList.add("collapse")):e.currentTarget===legendFill?(legendShare.parentNode.classList.add("collapse"),legendDesign.parentNode.classList.add("collapse")):(legendShare.parentNode.classList.add("collapse"),legendFill.parentNode.classList.add("collapse"))}legendShare.addEventListener("click",handlerClickLegend),legendFill.addEventListener("click",handlerClickLegend),legendDesign.addEventListener("click",handlerClickLegend);const palette=document.querySelectorAll(".js-radio"),preview=document.querySelector(".preview__article");function handlePaletteClick(e){const t=e.currentTarget.value;"1"===t?(preview.classList.add("palette-1"),preview.classList.remove("palette-2"),preview.classList.remove("palette-3")):"2"===t?(preview.classList.add("palette-2"),preview.classList.remove("palette-1"),preview.classList.remove("palette-3")):"3"===t&&(preview.classList.add("palette-3"),preview.classList.remove("palette-1"),preview.classList.remove("palette-2"))}for(const e of palette)e.addEventListener("click",handlePaletteClick);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}function fakeFileClick(){fileField.click()}fileField.addEventListener("change",getImage);const namePreview=document.querySelector(".js-preview__name"),jobPreview=document.querySelector(".js-preview__job"),phonePreview=document.querySelector(".js-preview__phone"),mailPreview=document.querySelector(".js-preview__mail"),linkedinPreview=document.querySelector(".js-preview__linkedin"),githubPreview=document.querySelector(".js-preview__github"),allInputs=document.querySelectorAll(".input"),data={name:"",job:"",photo:"",email:"",phone:"",linkedin:"",github:"",palette:""};function handleWriteInput(e){const t=e.currentTarget.name,r=e.currentTarget.value;data[t]=r,localStorage.setItem("userData",JSON.stringify(data))}let savedName={};function getStoredData(){savedName=JSON.parse(localStorage.getItem("userData")),console.log(savedName);for(const e in savedName)if("photo"===e)profileImage.style.backgroundImage=`url(${savedName[e]})`,profilePreview.style.backgroundImage=`url(${savedName[e]})`;else if("palette"===e){const t=savedName[e];document.querySelector(".js-palette-"+t).checked=!0}else{document.querySelector("#"+e).value=savedName[e]}}function renderUserValue(){""===data.name?namePreview.innerHTML="Nombre Apellido":namePreview.innerHTML=data.name,""===data.job?jobPreview.innerHTML="Front-end developer":jobPreview.innerHTML=data.job,mailPreview.href="mailto:"+data.email,phonePreview.href="tel:"+data.phone,linkedinPreview.href=data.linkedin,githubPreview.href=data.github}function handleUserInput(e){handleWriteInput(e),renderUserValue()}null!==localStorage.getItem("userData")&&getStoredData(),console.log(data.palette);for(const e of allInputs)e.addEventListener("keyup",handleUserInput),e.addEventListener("click",handleUserInput);const btnCreate=document.querySelector(".share__create_btn--off"),generatedLink=document.querySelector(".js_share_link"),twitterBtn=document.querySelector(".js-twitter");function handleClickCreate(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{console.log(e),e.success?(console.log("Bien"),generatedLink.innerHTML=e.cardURL,generatedLink.href=e.cardURL,twitterBtn.href="https://twitter.com/intent/tweet?text=Esta es mi tarjeta de Awesome Cards&url="+e.cardURL):console.error("Error")})}btnCreate.addEventListener("click",handleClickCreate);const shareResult=document.querySelector(".share__result"),shareBtn=document.querySelector(".js_shareBtn");function removeCollapse(){shareResult.classList.remove("collapseShare")}function changeColor(){shareBtn.classList.add("greyBtn")}function shareCard(){removeCollapse(),changeColor()}shareBtn.addEventListener("click",shareCard);const resetBtn=document.querySelector(".js-resetBtn");function resetForm(e){e.preventDefault();for(const e of allInputs)"palette"===e.name?"color_blue"===e.id?e.checked=!0:e.checked=!1:e.value="",namePreview.innerHTML="Nombre Apellido",jobPreview.innerHTML="Front-end developer",phonePreview.href="",mailPreview.href="",linkedinPreview.href="",githubPreview.href="",profileImage.style.backgroundImage="",profilePreview.style.backgroundImage="",generatedLink.innerHTML="",generatedLink.href="",shareBtn.classList.contains("greyBtn")&&(shareResult.classList.add("collapseShare"),shareBtn.classList.remove("greyBtn")),(preview.classList.contains("palette-2")||preview.classList.contains("palette-3"))&&(preview.classList.remove("palette-2"),preview.classList.remove("palette-3"),preview.classList.add("palette-1"));localStorage.setItem("userData","{}")}resetBtn.addEventListener("click",resetForm);